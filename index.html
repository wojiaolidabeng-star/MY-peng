<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>李医生数字诊室</title>
    <script src="https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/1.2.0-beta.19/libs/cn/index.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; display: flex; }

        /* 1. 调整布局：图片区域扩大到 75%，把分界线推向右侧 */
        .left-poster {
            width: 75%; 
            height: 100%;
            overflow: hidden;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        .left-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center right; /* 图片内容向右对齐 */
        }

        /* 2. 隐藏气泡，确保只显示中间/右侧对话框 */
        .coze-web-sdk-bubble-icon { display: none !important; }
        .coze-web-sdk-container {
            right: 20px !important;
            bottom: 20px !important;
            z-index: 1000 !important;
        }
    </style>
</head>
<body>
    <div class="left-poster">
        <img src="https://images.unsplash.com/photo-1629909613654-28e377c37b09?q=80&w=2070&auto=format&fit=crop" alt="诊室预览">
    </div>

    <script>
        // 【核心补丁】暴力抹除：除了缓存，连 Cookie 也要清除，彻底切断会话
        const nukeMemory = () => {
            localStorage.clear(); sessionStorage.clear();
            document.cookie.split(";").forEach(c => {
                document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
            });
        };
        nukeMemory();

        // 随机生成一个全新的“临时身份证”
        const freshId = 'p_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);

        const client = new CozeWebSDK.WebChatClient({
            config: { bot_id: '7608863077597626394' },
            componentProps: { title: '李医生数字诊室', layout: 'pc' },
            auth: {
                type: 'token',
                token: 'pat_dT8ZNCudSDhO2DRLnZMtuuZNhBwOFt4gTbNjr25yPK6FtkC5hK9VmehDLKuSqR7w',
                // 【必须补齐】解决 image_6dd537.png 里的报错
                onRefreshToken: () => 'pat_dT8ZNCudSDhO2DRLnZMtuuZNhBwOFt4gTbNjr25yPK6FtkC5hK9VmehDLKuSqR7w'
            },
            userInfo: { id: freshId, name: '访客' },
            ui: { asstBtn: { isNeed: false } }
        });

        // 自动弹窗
        setTimeout(() => { if (client.showChatBot) client.showChatBot(); }, 1200);
    </script>
</body>
</html>
